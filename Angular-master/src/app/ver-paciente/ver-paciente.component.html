<mat-drawer-container class="example-container2" [hasBackdrop]="true">

  <mat-drawer #drawer [mode]="side" position="end" style="width: 100%;background: rgb(25,40,212, 0.3);color: white;">
      <div class="padre">
        <div class="hijo2">

              <!-- llama al componente donde estan las graficas -->
              <app-estadisticas-fisicas-paciente></app-estadisticas-fisicas-paciente>

              <div style="bottom: 10px;margin-right: 10px;">
                  <button  mat-raised-button (click)="drawer.toggle()"
                      class="btn btn-outline-primary float-right botonperron">
                      Regresar
                  </button>
              </div>  

          </div>
      </div>
  </mat-drawer>


  <mat-drawer-content>
<div>

  <div class="containerScroll">

    <mat-card style="margin-bottom: 30px;">
      <div class="row">

        <div
          style="width: 216.5px;height: 216.5px;padding-left:50.75px;padding-right: 50.75px;padding-top: 38.25px;padding-bottom: 38.25px;margin-left: 20px;">
          <div style="position: fixed;margin-top: 20px;margin-left: 7.5px;" *ngIf="loading1==true"
            class="uploader-status">
            <mat-spinner [diameter]="100"></mat-spinner>
          </div>

          <div>
            <button *ngIf="noImg==true" mat-icon-button style="color: aliceblue;" class="cambiarfoto" id="cambiarfoto"
              (click)="cambiarfoto()">
              <mat-icon>add_a_photo</mat-icon>
            </button>
            <img *ngIf="noImg==true" id="sinImg" class="sinImg" />
          </div>



          <div>
            <button *ngIf="noImg == false" mat-icon-button style="color: aliceblue;" class="cambiarConfoto"
              id="cambiarConfoto" (click)="cambiarfoto()">
              <mat-icon>flip_camera_ios</mat-icon>
            </button>
            <img id="ima" *ngIf="noImg == false" #CambiarFoto class="img" src={{paciente.imagen}} />
          </div>



        </div>

        <div class="col" style="padding-top: 20px;">

          <mat-form-field class="example-full-width">
            <input matInput value={{paciente.nombre_completo}} placeholder="Nombre" readonly>
          </mat-form-field>

          <mat-form-field class="example-full-width">
            <input matInput value={{paciente.numero_identidad}} placeholder="Número identidad" readonly>
          </mat-form-field>

          <mat-form-field class="example-full-width" *ngIf="esAlumno === true">
            <input matInput value="{{paciente.numero_cuenta}}" placeholder="Número de cuenta" readonly>
          </mat-form-field>



        </div>


        <div class="col" style="padding-top: 20px;">

          <form [formGroup]="formulario_datos_generales">
            <mat-form-field class="example-full-width">
              <input matInput formControlName="numero_telefono" placeholder="Número de Teléfono" readonly>
            </mat-form-field>
          </form>

          <mat-form-field class="example-full-width">
            <input matInput value={{paciente.sexo}} placeholder="Sexo" readonly>
          </mat-form-field>

          <mat-form-field class="example-full-width" *ngIf="esAlumno === true ">
            <input matInput value={{paciente.carrera}} placeholder="Carrera" readonly>
          </mat-form-field>


        </div>

        <div class="col-xs-2 ">
          <button mat-icon-button [matMenuTriggerFor]="menu" style="outline:none;  
                    display:block;">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">            
            <button style="outline:none;display:block;" mat-menu-item (click)="anadirCita()">
              <mat-icon>add</mat-icon>
              <span>Añadir Historia Subsiguiente</span>
            </button>
            <button style="outline:none;display:block;" mat-menu-item (click)="mostrarHistoriasSub()">
              <mat-icon>history</mat-icon>
              <span>Ver Historial Cliníco</span>
            </button>            

            <button style="outline:none;display:block;" mat-menu-item (click)="drawer.toggle();">
              <mat-icon>bar_chart</mat-icon>
              <span>Estadística física</span>
            </button>

            <button style="outline:none;display:block;" mat-menu-item (click)="generarPDF()">
              <mat-icon>local_printshop</mat-icon>
              <span>Imprimir Constansia</span>
            </button>
          </mat-menu>

        </div>
      </div>
    </mat-card>







    <!--Condicion hecha para mostrar solo cuando no se este viendo las citas-->
    <div *ngIf="mostrarHisorias==false">
      <mat-accordion class="example-headers-align">

        <mat-expansion-panel [expanded]="step===0" (opened)="setStep(0)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6 class="titlepanel">Datos Generales</h6>
            </mat-panel-title>
            <mat-panel-description>Visualiazar datos generales del paciente
              <!-- <mat-icon>account_circle</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>





          <!-- AQUI SE VEN LOS ALUMNOS -->
          <div>
            <form [formGroup]="formulario_datos_generales">

              <div class="row" *ngIf="datosRepetido == false ">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Nombre Completo</b></mat-label>
                    <input matInput formControlName="nombre_completo" placeholder="Ingrese el nombre Completo">
                    <mat-error *ngIf="nombre_completo.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="nombre_completo.hasError('pattern')">ingrese un apellido válido</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" *ngIf="!readonlyDatosGenerales" appearance="fill">
                    <mat-label>Categoria Paciente</mat-label>
                    <mat-select formControlName="categoria" [disabled]="disabledDatosGenerales" (selectionChange)="selectCategoria(categoria.value)">
                      <mat-option *ngFor="let categoria of categorias" [value]="categoria.value">
                        {{categoria.viewValue}}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="categoria.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>

                
              </div>




              <div class="row" *ngIf="datosRepetido == false && esAlumno == true">

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>N° Cuenta</b></mat-label>
                    <input matInput formControlName="numero_cuenta" placeholder="Ingrese el N° Cuenta">
                    <!-- <mat-hint align="end">{{numero_cuenta.value.length}} / 11</mat-hint> -->
                    <mat-error *ngIf="numero_cuenta.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="numero_cuenta.hasError('pattern')">ingrese un numero de cuenta válido</mat-error>
                    <mat-error *ngIf="numero_cuenta.hasError('cuentaUnica')">La cuenta pertenece a otra persona
                    </mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Carrera</b></mat-label>
                    <input matInput formControlName="carrera" name="carrera" placeholder="Ingrese la carrera"
                      [readonly]="readonlyDatosGenerales">
                    <mat-error *ngIf="carrera.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="carrera.hasError('pattern')">ingrese datos válidos</mat-error>
                  </mat-form-field>
                </div>
              </div>





              <div class="row" *ngIf="datosRepetido == false">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>N° Identidad</b></mat-label>
                    <input matInput formControlName="numero_identidad" placeholder="Ingrese el N° Identidad">
                    <!-- <mat-hint align="end">{{numero_identidad.value.length}} / 13</mat-hint> -->
                    <mat-error *ngIf="numero_identidad.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="numero_identidad.hasError('pattern')">ingrese un número de indentidad válido
                    </mat-error>
                    <mat-error *ngIf="numero_identidad.hasError('identidadUnica')">La identidad pertenece a otra persona
                    </mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" *ngIf="readonlyDatosGenerales" appearance="fill">
                    <input matInput matInput formControlName="sexo" placeholder="Sexo"
                      [readonly]="readonlyDatosGenerales">
                  </mat-form-field>

                  <mat-form-field class="example-full-width" *ngIf="!readonlyDatosGenerales" appearance="fill">
                    <mat-label><b>Sexo</b></mat-label>
                    <mat-select formControlName="sexo" readonly="readonly">
                      <mat-option value="Hombre">Hombre</mat-option>
                      <mat-option value="Mujer">Mujer</mat-option>
                    </mat-select>
                    <mat-error *ngIf="sexo.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>
              </div>





              <div class="row">


                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Lugar de Procedencia</b></mat-label>
                    <input matInput formControlName="lugar_procedencia" name="lugar_procedencia"
                      placeholder="Ingrese el lugar de Procedencia" [readonly]="readonlyDatosGenerales">
                    <mat-error *ngIf="lugar_procedencia.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="lugar_procedencia.hasError('pattern')">ingrese datos válidos</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Dirección</b></mat-label>
                    <input matInput formControlName="direccion" name="direccion" placeholder="Ingrese la dirección"
                      [readonly]="readonlyDatosGenerales">
                    <mat-error *ngIf="direccion.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="direccion.hasError('maxlength')">campo muy extenso</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Correo electrónico</b></mat-label>
                    <input matInput formControlName="correo_electronico" name="correo_electronico" placeholder="Ingrese el correo"
                      [readonly]="readonlyDatosGenerales">
                    <mat-error *ngIf="correo_electronico.hasError('required')">campo requerido</mat-error>
                    <!-- <mat-error *ngIf="correo_electronico.hasError('pattern')">campo no válido</mat-error> -->
                  </mat-form-field>
                </div>


              </div>


              <div class="row">

                <div class="col">
                  <mat-form-field class="example-full-width" *ngIf="readonlyDatosGenerales" appearance="fill">
                    <mat-label><b>Fecha nacimiento</b></mat-label>
                    <input matInput matInput formControlName="fecha_nacimiento"
                      placeholder="Ingrese la fecha de nacimiento" [readonly]="readonlyDatosGenerales">
                  </mat-form-field>

                  <mat-form-field class="example-full-width" *ngIf="!readonlyDatosGenerales" appearance="fill">
                    <mat-label><b>Fecha Nacimiento</b></mat-label>
                    <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker1"
                      formControlName="fecha_nacimiento" placeholder="Ingrese la fecha de nacimiento"
                      [readonly]="readonlyDatosGenerales">
                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                    <mat-error *ngIf="fecha_nacimiento.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>



                <div class="col">

                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Seguro médico</b></mat-label>
                    <mat-select formControlName="seguro_medico" [disabled]="disabledDatosGenerales">
                      <mat-option *ngFor="let seguro_medico of seguros_medicos" [value]="seguro_medico.value">
                        {{seguro_medico.viewValue}}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="seguro_medico.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">

                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Estado civil</b></mat-label>
                    <mat-select formControlName="estado_civil" [disabled]="disabledDatosGenerales">
                      <mat-option *ngFor="let estado_civil of estados_civiles" [value]="estado_civil.value">
                        {{estado_civil.viewValue}}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="estado_civil.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>
              </div>









              <!--Datos restantes-->
              <div class="row">

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Peso(en Kg)</b></mat-label>
                    <input matInput formControlName="peso" placeholder="Aún no especificado"
                      [readonly]="readonlyDatosGenerales">
                    <mat-error *ngIf="peso.hasError('pattern')">solo se permiten números</mat-error>
                    <mat-error *ngIf="peso.hasError('max')">peso no válido</mat-error>
                    <mat-error *ngIf="peso.hasError('min')">peso no válido</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Talla</b></mat-label>
                    <input matInput formControlName="talla" placeholder="Aún no especificado"
                      [readonly]="readonlyDatosGenerales">
                    <mat-error *ngIf="talla.hasError('pattern')">solo se permiten números</mat-error>
                    <mat-error *ngIf="talla.hasError('max')">talla no válida</mat-error>
                    <mat-error *ngIf="talla.hasError('min')">talla no válida</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Temperatura(en ºC)</b></mat-label>
                    <input matInput formControlName="temperatura" placeholder="Aún no especificado"
                      [readonly]="readonlyDatosGenerales">
                    <mat-error *ngIf="temperatura.hasError('pattern')">solo se permiten números</mat-error>
                    <mat-error *ngIf="temperatura.hasError('max')">temperatura no válida</mat-error>
                    <mat-error *ngIf="temperatura.hasError('min')">temperatura no válida</mat-error>
                  </mat-form-field>
                </div>

              </div>


            <div class="row">

            <div class="col">
            <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'"> 
            <mat-label><b>Presión arterial sistólica</b></mat-label>
            <input matInput formControlName="presion_sistolica" name="presion_sistolica"
            [readonly]="readonlyDatosGenerales"
            placeholder="Aún no especificado">
            <mat-error *ngIf="presion_sistolica.hasError('required')">campo requerido</mat-error>
            <mat-error *ngIf="presion_sistolica.hasError('pattern')">solo números con dos cifras decimales
            </mat-error>
            <mat-error *ngIf="presion_sistolica.hasError('max')">presión no válida</mat-error>
            <mat-error *ngIf="presion_sistolica.hasError('min')">presión no válida</mat-error>
            </mat-form-field>
            </div>

            <div class="col">
            <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
            <mat-label><b>Presión arterial diastólica</b></mat-label>
            <input matInput formControlName="presion_diastolica" name="presion_diastolica"
            [readonly]="readonlyDatosGenerales"
            placeholder="Aún no especificado">
            <mat-error *ngIf="presion_diastolica.hasError('required')">campo requerido</mat-error>
            <mat-error *ngIf="presion_diastolica.hasError('pattern')">solo números con dos cifras
            decimales
            </mat-error>
            <mat-error *ngIf="presion_diastolica.hasError('max')">presión no válida</mat-error>
            <mat-error *ngIf="presion_diastolica.hasError('min')">presión no válida</mat-error>
            </mat-form-field>
            </div>

            <div class="col">
            <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
            <mat-label><b>Pulso</b></mat-label>
            <input matInput formControlName="pulso" placeholder="Aún no especificado"
            [readonly]="readonlyDatosGenerales">
            <mat-error *ngIf="pulso.hasError('pattern')">solo se permiten números</mat-error>
            <mat-error *ngIf="pulso.hasError('max')">pulso no válido</mat-error>
            <mat-error *ngIf="pulso.hasError('min')">pulso no válido</mat-error>
            </mat-form-field>
            </div>

            </div>



              <div class="row">
                <!-- ESTA ES LA VAINA DE VER TELEFONO-->
                <div class="col" *ngIf="readonlyDatosGenerales === true">
                  <mat-accordion>
                    <mat-expansion-panel>

                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          Teléfonos del paciente
                        </mat-panel-title>
                        <mat-panel-description>
                          haz click para visualizarlos
                        </mat-panel-description>
                      </mat-expansion-panel-header>

                      <div class="row medium-width" style="margin-left: 0;">
                        <table mat-table [dataSource]="tablaTelefonos" class="mat-elevation-z8 tabla"
                          style="margin-right: 16px;">

                          <ng-container matColumnDef="numero">
                            <th mat-header-cell *matHeaderCellDef> # </th>
                            <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                          </ng-container>

                          <ng-container matColumnDef="telefono">
                            <th mat-header-cell *matHeaderCellDef> Teléfono </th>
                            <td mat-cell *matCellDef="let element"> {{element.telefono}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>

                          </ng-container>
                          <tr mat-header-row *matHeaderRowDef="columnasTablaTelefono"></tr>
                          <tr mat-row *matRowDef="let row; columns: columnasTablaTelefono;"></tr>
                        </table>
                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>
                </div>


                <!-- ESTA ES LA VAINA DE EDITAR TELEFONO PACIENTE-->
                <div class="col" *ngIf="readonlyDatosGenerales === false">
                  <mat-card>
                    <div class="row">
                      <div class="col">


                        <mat-form-field appearance="fill" [floatLabel]="'always'">
                          <mat-label><b>Teléfono del paciente</b></mat-label>
                          <input matInput formControlName="numero_telefono_agregar" maxlength="8"
                            placeholder="Ingrese el teléfono">
                          <!-- <mat-hint align="end">{{numero_telefono.value.length}} / 8</mat-hint> -->
                          <mat-error *ngIf="numero_telefono_agregar.hasError('required')">campo requerido</mat-error>
                          <mat-error *ngIf="numero_telefono_agregar.hasError('pattern')">
                            introduzca un número de teléfono válido
                          </mat-error>
                          <mat-error *ngIf="numero_telefono_agregar.hasError('telefonoUnico')">El numero pertenece a otra persona
                          </mat-error>
                        </mat-form-field>

                        &nbsp; &nbsp; &nbsp;

                        <button mat-raised-button (click)="agregarTelefonos();">agregar</button>

                      </div>
                    </div>

                    <div class="row medium-width" style="margin-left: 0;">
                      <table mat-table [dataSource]="tablaTelefonos" class="mat-elevation-z8 tabla"
                        *ngIf="tablaTelefonos != null" style="margin-right: 16px;">

                        <ng-container matColumnDef="numero">
                          <th mat-header-cell *matHeaderCellDef> # </th>
                          <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="telefono">
                          <th mat-header-cell *matHeaderCellDef> Teléfono </th>
                          <td mat-cell *matCellDef="let element"> {{element.telefono}} </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="botones">
                          <th mat-header-cell *matHeaderCellDef></th>
                          <td mat-cell *matCellDef="let element;">
                            <button mat-icon-button class="botonesTabla"
                              (click)="eliminarTelefono(element.id_telefono_paciente)">
                              <mat-icon>delete</mat-icon>
                            </button>
                          </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="columnasTablaTelefonosEditar"></tr>
                        <tr mat-row *matRowDef="let row; columns: columnasTablaTelefonosEditar;"></tr>
                      </table>

                    </div>
                  </mat-card>
                </div>













                <!-- ESTA ES LA VAINA DE VER TELEFONO EMERGENCIA -->
                <div class="col" *ngIf="readonlyDatosGenerales === true">
                  <mat-accordion>
                    <mat-expansion-panel>

                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          Teléfonos de emergencia
                        </mat-panel-title>
                        <mat-panel-description>
                          haz click para visualizarlos
                        </mat-panel-description>
                      </mat-expansion-panel-header>

                      <div class="row medium-width" style="margin-left: 0;">
                        <table mat-table [dataSource]="tablaTelefonosEmergencia" class="mat-elevation-z8 tabla"
                          style="margin-right: 16px;">

                          <ng-container matColumnDef="numero">
                            <th mat-header-cell *matHeaderCellDef> # </th>
                            <a>eliminar</a>
                            <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                          </ng-container>

                          <ng-container matColumnDef="persona">
                            <th mat-header-cell *matHeaderCellDef> Persona </th>
                            <td mat-cell *matCellDef="let element"> {{element.emergencia_persona}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                          </ng-container>

                          <ng-container matColumnDef="telefono">
                            <th mat-header-cell *matHeaderCellDef> Teléfono </th>
                            <td mat-cell *matCellDef="let element"> {{element.telefono_emergencia}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>

                          </ng-container>
                          <tr mat-header-row *matHeaderRowDef="columnasTablaEmergenciaPersona"></tr>
                          <tr mat-row *matRowDef="let row; columns: columnasTablaEmergenciaPersona;"></tr>
                        </table>
                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>
                </div>


                <!-- ESTA ES LA VAINA DE EDITAR -->
                <div class="col" *ngIf="readonlyDatosGenerales === false">
                  <mat-card>
                    <div class="row">
                      <div class="col">

                        <mat-form-field appearance="fill" [floatLabel]="'always'">
                          <mat-label><b>En caso de emergencia llamar a:</b></mat-label>
                          <input matInput formControlName="emergencia_persona" name="emergencia_persona" id=""
                            placeholder="Nombre del conocido">
                          <mat-error *ngIf="emergencia_persona.hasError('pattern')">
                            introduzca un nombre válido
                          </mat-error>
                        </mat-form-field>

                        &nbsp; &nbsp; &nbsp; &nbsp;

                        <mat-form-field appearance="fill" [floatLabel]="'always'">
                          <mat-label><b>Teléfono </b></mat-label>
                          <input matInput formControlName="emergencia_telefono" maxlength="8"
                            placeholder="Teléfono del conocido">
                          <mat-hint align="end">{{emergencia_telefono.value.length}} / 8</mat-hint>
                          <mat-error *ngIf="emergencia_telefono.hasError('pattern')">
                            introduzca un número de teléfono válido
                          </mat-error>
                        </mat-form-field>

                        &nbsp; &nbsp; &nbsp;

                        <button mat-raised-button (click)="agregarTelefonosEmergencia();">agregar</button>

                      </div>
                    </div>

                    <div class="row medium-width" style="margin-left: 0;">
                      <table mat-table [dataSource]="tablaTelefonosEmergencia" class="mat-elevation-z8 tabla"
                        *ngIf="tablaTelefonosEmergencia != null" style="margin-right: 16px;">

                        <ng-container matColumnDef="numero">
                          <th mat-header-cell *matHeaderCellDef> # </th>
                          <a>eliminar</a>
                          <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="nombre">
                          <th mat-header-cell *matHeaderCellDef> Persona </th>
                          <td mat-cell *matCellDef="let element"> {{element.emergencia_persona}} </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="telefono">
                          <th mat-header-cell *matHeaderCellDef> Teléfono </th>
                          <td mat-cell *matCellDef="let element"> {{element.telefono_emergencia}} </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="botones">
                          <th mat-header-cell *matHeaderCellDef></th>
                          <td mat-cell *matCellDef="let element;">
                            <button mat-icon-button class="botonesTabla"
                              (click)="eliminarTelefonosEmergencia(element.id_telefono_emergencia)">
                              <mat-icon>delete</mat-icon>
                            </button>
                          </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="columnasTablaTelefonosEmergencia"></tr>
                        <tr mat-row *matRowDef="let row; columns: columnasTablaTelefonosEmergencia;"></tr>
                      </table>

                    </div>
                  </mat-card>
                </div>

                <div class="col">
                  <div style="padding-top: 20px;">
                    <label id="example-radio-group-label" style="margin-right: 40px;">Prosene</label>
                    <mat-radio-group formControlName="prosene" aria-labelledby="example-radio-group-label"
                      class="example-radio-group" [disabled]="disabledDatosGenerales">
                      <mat-radio-button value="Si">Si</mat-radio-button> &nbsp; &nbsp;&nbsp;
                      <mat-radio-button value="No">No</mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>




              </div>

              <button mat-raised-button class="btn btn-outline-primary float-right botonperron"
                style="margin-top: 10px;" (click)="actualizarDatosGenerales(); ">
                {{!readonlyDatosGenerales ? 'Guardar' : 'Editar'}}
              </button>

            </form>
          </div>

        </mat-expansion-panel>










        <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6 class="titlepanel">Antecedentes familiares </h6>
            </mat-panel-title>
            <mat-panel-description>
              Visualiazar Antecedentes familiares del paciente
              <!-- <mat-icon>map</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>


          <div *ngIf="readonlyAntecedentesFamiliares == true">
            <div>

              <p *ngIf="tablaAntecedentesFamiliares == null">Este paciente no tiene antecedentes familiares</p>
              <table mat-table id="tabla1" [dataSource]="tablaAntecedentesFamiliares" class="mat-elevation-z8"
                *ngIf="tablaAntecedentesFamiliares != null">

                <!-- columna antecedente -->
                <ng-container matColumnDef="antecedente">
                  <th mat-header-cell *matHeaderCellDef> Grupo Enfermedad </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.grupo_enfermedad}} </td>

                  <!-- este mat-footer siempre tiene que ir en cada columna -->
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- columna valor -->
                <ng-container matColumnDef="valor">
                  <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.enfermedad}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>

                  <!-- <td mat-footer-cell *matFooterCellDef> {{getTotalCost() | currency}} </td> -->

                </ng-container>

                <!-- columna tipo -->


                <!-- columna parentesco -->
                <ng-container matColumnDef="parentesco">
                  <th mat-header-cell *matHeaderCellDef> Parentesco </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.parentesco}}</td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- columna observaccion -->


                <tr mat-header-row *matHeaderRowDef="columnasTablaAntecedentesFamiliares"></tr>
                <tr mat-row *matRowDef="let row; columns: columnasTablaAntecedentesFamiliares;"></tr>
                <tr mat-footer-row *matFooterRowDef="columnasTablaAntecedentesFamiliares"></tr>
              </table>


              <button mat-raised-button class="btn btn-outline-primary float-right botonperron"
                style="margin-top: 10px;" (click)="readonlyAntecedentesFamiliares = !readonlyAntecedentesFamiliares;
ocultarbtnagregardesnutricionAF=true;    ocultarbtnagregarmentalAF=true;    ocultarbtnagregaralergiaAF=true;    
ocultarbtnagregarcancerAF=true;    ocultarbtnagregarotroAF=true;    ">
                {{!readonlyAntecedentesFamiliares ? 'Guardar' : 'Editar'}}
              </button>
            </div>
          </div>



          <!-- AQUI ESTA EDITANDO -->

          <div *ngIf="readonlyAntecedentesFamiliares == false">

            <div class="row">


              <!-- ENFERMEDADES DESNUTRICION AF -->

              <!--el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->
              <div class="col">
                <mat-card>
                  <form [formGroup]="formulario_antecedentes_familiares">
                    <div class="row" style="margin-left: 0;">
                      <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposDesnutricionAF">
                        <mat-form-field class="autocomplete">
                          <input matInput formControlName="tipo_desnutricion" placeholder="Tipo Desnutricion"
                            id="InputDesnutricion">
                          <mat-error style="margin-left: 0;" *ngIf="tipo_desnutricion.hasError('pattern')">no valido
                          </mat-error>
                        </mat-form-field>

                        &nbsp; &nbsp;

                        <mat-form-field>
                          <mat-label>Parentesco</mat-label>
                          <mat-select formControlName="parentesco_desnutricion" name="parentesco_desnutricion" multiple>
                            <mat-option *ngFor="let parentesco of parentescos" [value]="parentesco.value">
                              {{parentesco.viewValue}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>

                        <button mat-icon-button class="botonesTabla" (click)="agregarDesnutricionesAF();">
                          <mat-icon>save</mat-icon>
                        </button>

                      </div>
                    </div>
                  </form>

                  <!-- TABLA DE SOLO DESNUTRICIONES FAMILIARES -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregardesnutricionAF == true ">
                        <button class="botonperron"
                          (click)="ocultarbtnagregardesnutricionAF = !ocultarbtnagregardesnutricionAF;habilitarInputs([tipo_desnutricion]); mostrarCamposDesnutricionAF()">
                          Agregar desnutrición
                        </button>
                      </div>
                      <div class="row" *ngIf="tablaDesnutricionAF == null" style="margin-top: 5px;"> Este paciente no
                        tiene desnutrición </div>
                    </div>
                    <table mat-table [dataSource]="tablaDesnutricionAF" class="mat-elevation-z8 tabla"
                      *ngIf="tablaDesnutricionAF != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="parentesco">
                        <th mat-header-cell *matHeaderCellDef> Parentesco </th>
                        <td mat-cell *matCellDef="let element"> {{element.parentesco}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAF(element.id_enfermedad)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaDesnutricionAF"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaDesnutricionAF;"></tr>
                    </table>
                  </div>
                </mat-card>
              </div>







              <!-- ENFERMEDADES MENTALES AF -->

              <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->
              <div class="col">
                <mat-card>
                  <form [formGroup]="formulario_antecedentes_familiares">
                    <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposEnfermedadesMentalesAF">

                      <mat-form-field>
                        <input matInput formControlName="tipo_enfermedad_mental" placeholder="Tipo enfermedad mental"
                          id="InputEnfermedadAF">
                        <mat-error style="margin-left: 0;" *ngIf="tipo_enfermedad_mental.hasError('pattern')">no valido
                        </mat-error>
                      </mat-form-field>
                      &nbsp; &nbsp;

                      <mat-form-field>
                        <mat-label>Parentesco</mat-label>
                        <mat-select formControlName="parentesco_enfermedades_mentales" multiple>
                          <mat-option *ngFor="let parentesco of parentescos" [value]="parentesco.value">
                            {{parentesco.viewValue}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>

                      <button mat-icon-button (click)="agregarEnfermedadesMentales();" class="botonesTabla">
                        <mat-icon>save</mat-icon>
                      </button>

                    </div>
                  </form>

                  <!-- TABLA DE SOLO MENTALES FAMILIARES -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregarmentalAF == true "><button class="botonperron"
                          (click)="ocultarbtnagregarmentalAF = !ocultarbtnagregarmentalAF;habilitarInputs([tipo_enfermedad_mental]); mostrarCamposEnfermedadesMentalesAF()">
                          agregar enfermedad mental</button></div>
                      <div class="row" *ngIf="tablaMentalAF == null" style="margin-top: 5px;"> Este paciente no tiene
                        enfermedades mentales</div>
                    </div>
                    <table mat-table [dataSource]="tablaMentalAF" class="mat-elevation-z8 tabla"
                      *ngIf="tablaMentalAF != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="parentesco">
                        <th mat-header-cell *matHeaderCellDef> Parentesco </th>
                        <td mat-cell *matCellDef="let element"> {{element.parentesco}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAF(element.id_enfermedad)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaMentalAF"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaMentalAF;"></tr>
                    </table>
                  </div>
                </mat-card>
              </div>

            </div>






            <div class="row">
              <div class="col">

                <!-- ENFERMEDADES ALERGIAS AF -->

                <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->
                <mat-card style="margin-top: 15px;">
                  <form [formGroup]="formulario_antecedentes_familiares">
                    <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposAlergiasAF">

                      <mat-form-field>
                        <input matInput formControlName="tipo_alergia" placeholder="Tipo alergia" id="InputAlergiaAF">
                        <mat-error style="margin-left: 0;" *ngIf="tipo_alergia.hasError('pattern')">no valido
                        </mat-error>
                      </mat-form-field>

                      &nbsp; &nbsp;

                      <mat-form-field>
                        <mat-label>Parentesco</mat-label>
                        <mat-select formControlName="parentesco_alergias" multiple>
                          <mat-option *ngFor="let parentesco of parentescos" [value]="parentesco.value">
                            {{parentesco.viewValue}}
                          </mat-option>
                        </mat-select>
                        <mat-error style="margin-left: 0;" *ngIf="parentesco_alergias.hasError('required')">
                          !campo requerido!
                        </mat-error>

                      </mat-form-field>


                      <button mat-icon-button (click)="agregarAlergias();" class="botonesTabla">
                        <mat-icon>save</mat-icon>
                      </button>
                    </div>
                  </form>

                  <!-- TABLA DE SOLO ALERGIAS FAMILIARES -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregaralergiaAF == true "><button class="botonperron"
                          value={{11}}
                          (click)="ocultarbtnagregaralergiaAF = !ocultarbtnagregaralergiaAF;habilitarInputs([tipo_alergia]); mostrarCamposAlergiasAF()">
                          agregar alergia</button></div>
                      <div class="row" *ngIf="tablaAlergiaAF == null" style="margin-top: 5px;"> Este paciente no tiene
                        alergias</div>
                    </div>
                    <table mat-table [dataSource]="tablaAlergiaAF" class="mat-elevation-z8 tabla"
                      *ngIf="tablaAlergiaAF != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="parentesco">
                        <th mat-header-cell *matHeaderCellDef> Parentesco </th>
                        <td mat-cell *matCellDef="let element"> {{element.parentesco}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAF(element.id_enfermedad)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaAlergiaAF"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaAlergiaAF;"></tr>
                    </table>
                  </div>
                </mat-card>
              </div>




              <!-- ENFERMEDADES CANCERES AF -->

              <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->

              <div class="col">
                <mat-card style="margin-top: 15px;">
                  <form [formGroup]="formulario_antecedentes_familiares">
                    <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposCancerAF">
                      <mat-form-field>
                        <input matInput formControlName="tipo_cancer" placeholder="Tipo cáncer" id="InputCancerAF">

                        <mat-error style="margin-left: 0;" *ngIf="tipo_cancer.hasError('pattern')">no valido</mat-error>
                      </mat-form-field>

                      &nbsp; &nbsp;

                      <mat-form-field>
                        <mat-label>Parentesco</mat-label>
                        <mat-select formControlName="parentesco_cancer" multiple>
                          <mat-option *ngFor="let parentesco of parentescos" [value]="parentesco.value">
                            {{parentesco.viewValue}}
                          </mat-option>
                        </mat-select>
                        <mat-error style="margin-left: 0;" *ngIf="parentesco_cancer.hasError('required')">
                          !campo requerido!
                        </mat-error>
                      </mat-form-field>

                      <button mat-icon-button (click)="agregarCanceresAF();" class="botonesTabla">
                        <mat-icon>save</mat-icon>
                      </button>

                    </div>
                  </form>

                  <!-- TABLA DE SOLO CANCERES FAMILIARES -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregarcancerAF == true "><button class="botonperron"
                          value={{12}}
                          (click)="ocultarbtnagregarcancerAF = !ocultarbtnagregarcancerAF;habilitarInputs([tipo_cancer]); mostrarCamposCancerAF()">
                          agregar cancer</button></div>
                      <div class="row" *ngIf="tablaCancerAF == null" style="margin-top: 5px;"> Este paciente no tiene
                        canceres</div>
                    </div>
                    <table mat-table [dataSource]="tablaCancerAF" class="mat-elevation-z8 tabla"
                      *ngIf="tablaCancerAF != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="parentesco">
                        <th mat-header-cell *matHeaderCellDef> Parentesco </th>
                        <td mat-cell *matCellDef="let element"> {{element.parentesco}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAF(element.id_enfermedad)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaCancerAF"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaCancerAF;"></tr>
                    </table>
                  </div>
                </mat-card>
              </div>
            </div>









            <!-- ENFERMEDADES OTROS AF -->

            <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->
            <mat-card style="margin-top: 15px;">
              <form [formGroup]="formulario_antecedentes_familiares">
                <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposOtrosAF">

                  <mat-form-field>
                    <input matInput formControlName="otros" placeholder="Otros" id="InputOtroAF">
                    <mat-error style="margin-left: 0;" *ngIf="otros.hasError('pattern')">no valido</mat-error>
                  </mat-form-field>
                  &nbsp; &nbsp;

                  <mat-form-field>
                    <mat-label>Parentesco</mat-label>
                    <mat-select formControlName="parentesco_otros" multiple>
                      <mat-option *ngFor="let parentesco of parentescos" [value]="parentesco.value">
                        {{parentesco.viewValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <button mat-icon-button (click)="agregarOtrosAF();" class="botonesTabla">
                    <mat-icon>save</mat-icon>
                  </button>
                </div>
              </form>

              <!-- TABLA DE SOLO OTROS FAMILIARES -->
              <div class="row medium-width" style="margin-left: 0;">
                <div class="col">
                  <div class="row" *ngIf="ocultarbtnagregarotroAF == true "> <button class="botonperron" value={{13}}
                      (click)="ocultarbtnagregarotroAF = !ocultarbtnagregarotroAF;habilitarInputs([otros]); mostrarCamposOtroAF()">
                      agregar otra enfermedad</button></div>
                  <div class="row" *ngIf="tablaOtroAF == null" style="margin-top: 5px;"> Este paciente no tiene otras
                    enfermedades</div>
                </div>
                <table mat-table [dataSource]="tablaOtroAF" class="mat-elevation-z8 tabla" *ngIf="tablaOtroAF != null"
                  style="margin-right: 16px;">
                  <ng-container matColumnDef="grupoenfermedad">
                    <th mat-header-cell *matHeaderCellDef> # </th>
                    <a>eliminar</a>
                    <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                    <td mat-footer-cell *matFooterCellDef></td>
                  </ng-container>

                  <ng-container matColumnDef="enfermedad">
                    <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                    <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                    <td mat-footer-cell *matFooterCellDef></td>
                  </ng-container>

                  <ng-container matColumnDef="parentesco">
                    <th mat-header-cell *matHeaderCellDef> Parentesco </th>
                    <td mat-cell *matCellDef="let element"> {{element.parentesco}} </td>
                    <td mat-footer-cell *matFooterCellDef></td>
                  </ng-container>

                  <ng-container matColumnDef="botoneseliminar">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element;">
                      <button mat-icon-button class="botonesTabla"
                        (click)="eliminarDesnutricionAF(element.id_enfermedad)">
                        <mat-icon>delete</mat-icon>
                      </button>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="columnasTablaOtroAF"></tr>
                  <tr mat-row *matRowDef="let row; columns: columnasTablaOtroAF;"></tr>
                </table>
              </div>
            </mat-card>






            <button mat-raised-button class="float-right botonperron" style="margin-top: 10px;"
              (click)="readonlyAntecedentesFamiliares = !readonlyAntecedentesFamiliares;agregarDesnutricionesAF();agregarEnfermedadesMentales();agregarAlergias();agregarCanceresAF();agregarOtrosAF(); ">
              {{!readonlyAntecedentesFamiliares ? 'Regresar' : 'Editar'}}
            </button>

          </div>
        </mat-expansion-panel>













        <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>

          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6 class="titlepanel"> Antecedentes personales</h6>
            </mat-panel-title>
            <mat-panel-description>
              Visualiazar Antecedentes personales del paciente
              <!-- <mat-icon>date_range</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>


          <!-- si no se esta editando se mostrara este div -->
          <div *ngIf="readonlyAntecedentesPersonales == true">
            <div>

              <p *ngIf="tablaAntecedentesPersonales == null">Este paciente no tiene antecedentes personales</p>
              <table mat-table id="tabla2" [dataSource]="tablaAntecedentesPersonales" class="mat-elevation-z8"
                *ngIf="tablaAntecedentesPersonales != null">

                <!-- columna antecedente -->
                <ng-container matColumnDef="antecedente">
                  <th mat-header-cell *matHeaderCellDef> Grupo Enfermedad </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.grupo_enfermedad}} </td>
                  <!-- este mat-footer siempre tiene que ir en cada columna -->
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- columna valor -->
                <ng-container matColumnDef="valor">
                  <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.enfermedad}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <ng-container matColumnDef="observacion">
                  <th mat-header-cell *matHeaderCellDef> Observacion </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.observacion}}</td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="columnasTablaAntecedentesPersonales"></tr>
                <tr mat-row *matRowDef="let row; columns: columnasTablaAntecedentesPersonales;"></tr>
                <tr mat-footer-row *matFooterRowDef="columnasTablaAntecedentesPersonales"></tr>
              </table>

              <!-- TABLA DE HOSPITALARIAS QUIRURGICAS -->
              <h6>Hospitalarias quirúrgicas</h6>
              <p *ngIf="tablahospitalarias == null">Este paciente no tiene hospitalarias quirúrgicas</p>
              <table mat-table [dataSource]="tablahospitalarias" class="mat-elevation-z8 tabla"
                *ngIf="tablahospitalarias != null">

                <ng-container matColumnDef="fecha">
                  <th mat-header-cell *matHeaderCellDef> Fecha</th>
                  <td mat-cell *matCellDef="let element;"> {{element.fecha}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <ng-container matColumnDef="tiempo_hospitalizacion">
                  <th mat-header-cell *matHeaderCellDef> Tiempo Hospitalización </th>
                  <td mat-cell *matCellDef="let element"> {{element.tiempo_hospitalizacion}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <ng-container matColumnDef="diagnostico">
                  <th mat-header-cell *matHeaderCellDef> Diagnóstico </th>
                  <td mat-cell *matCellDef="let element"> {{element.diagnostico}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <ng-container matColumnDef="tratamiento">
                  <th mat-header-cell *matHeaderCellDef> Tratamiento </th>
                  <td mat-cell *matCellDef="let element"> {{element.tratamiento}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="columnashospitalarias"></tr>
                <tr mat-row *matRowDef="let row; columns: columnashospitalarias;"></tr>
              </table>


              <button mat-raised-button class="btn btn-outline-primary float-right botonperron"
                style="margin-top: 10px;" (click)="readonlyAntecedentesPersonales = !readonlyAntecedentesPersonales;
    ocultarbtnagregardesnutricionAP=true;   ocultarbtnagregarotroAP=true;  ocultarbtnagregarhospitalaria=true;
    ocultarbtnagregarmentalAP=true;     ocultarbtnagregaralergiaAP=true;   ocultarbtnagregarcancerAP=true;">
                {{!readonlyAntecedentesPersonales ? 'Guardar' : 'Editar'}}
              </button>
            </div>
          </div>

          <!-- AQUI SE ESTA EDITANDO ANTECEDENTES PERSONALES -->
          <div *ngIf="readonlyAntecedentesPersonales == false">

            <div class="row">
              <div class="col">
                <mat-card>

                  <!-- ENFERMEDADES DESNUTRICION AP -->
                  <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->

                  <form [formGroup]="formulario_antecedentes_personales">
                    <div class="col" style="display: none; padding: 0px;" id="divAgregarTiposDesnutricionAP">

                      <mat-form-field>
                        <input matInput formControlName="tipo_desnutricion" placeholder="Tipo Desnutricion"
                          id="InputDenutricionAP">
                        <mat-error style="margin-left: 0;" *ngIf="tipo_desnutricion.hasError('pattern')">no valido
                        </mat-error>
                      </mat-form-field>
                      &nbsp; &nbsp;

                      <mat-form-field class="medium-width">
                        <textarea matInput formControlName="observacion_desnutricion" cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3"
                          style="overflow: hidden;"
                          placeholder="Añada una observación en caso de ser necesario"></textarea>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('maxlength')">campo muy extenso
                        </mat-error>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('minlength')">introduzca una observación
                          válida
                        </mat-error>
                      </mat-form-field>

                      <button mat-icon-button (click)="agregarDesnutricionesAP();" class="botonesTabla">
                        <mat-icon>save</mat-icon>
                      </button>
                    </div>
                  </form>

                  <!-- TABLA SOLO DESNUTRICIONES AP -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregardesnutricionAP == true "><button class="botonperron"
                          (click)="ocultarbtnagregardesnutricionAP = !ocultarbtnagregardesnutricionAP;habilitarInputs([tipo_desnutricion]); mostrarCamposDesnutricionAP()">
                          agregar desnutricion</button></div>
                      <div class="row" *ngIf="tablaDesnutricionAP == null">Este paciente no tiene desnutrición</div>
                    </div>
                    <table mat-table [dataSource]="tablaDesnutricionAP" class="mat-elevation-z8 tabla"
                      *ngIf="tablaDesnutricionAP != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="observacion">
                        <th mat-header-cell *matHeaderCellDef> Observación </th>
                        <td mat-cell *matCellDef="let element"> {{element.observacion}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAP(element.id_enfermedad);">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="botonesE">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="editarDesnutricionAP(element.id_enfermedad);   ocultarbtnagregardesnutricionAP = false;    mostrarCamposDesnutricionAP();">
                            <mat-icon>create</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaDesnutricionAP"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaDesnutricionAP;"></tr>
                    </table>
                  </div>
                </mat-card>
              </div>








              <!-- ENFERMEDADES MENTALES AP -->

              <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->
              <div class="col">
                <mat-card>
                  <form [formGroup]="formulario_antecedentes_personales">
                    <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposEnfermedadesMentalesAP">

                      <mat-form-field>
                        <input matInput formControlName="tipo_enfermedad_mental" placeholder="Tipo enfermedad mental"
                          id="InputEnfermedadAP">
                        <mat-error style="margin-left: 0;" *ngIf="tipo_enfermedad_mental.hasError('pattern')">no valido
                        </mat-error>
                      </mat-form-field>
                      &nbsp; &nbsp;

                      <mat-form-field class="medium-width">
                        <textarea matInput formControlName="observacion_enfermedades_mentales" cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3"
                          style="overflow: hidden;" placeholder="Añada una observación en caso de ser necesario">
      </textarea>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('maxlength')">campo muy extenso
                        </mat-error>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('minlength')">introduzca una observación
                          válida
                        </mat-error>
                      </mat-form-field>

                      <button mat-icon-button (click)="agregarEnfermedadesMentalesAP();" class="botonesTabla">
                        <mat-icon>save</mat-icon>
                      </button>
                    </div>
                  </form>

                  <!-- TABLA SOLO ENFERMEDADES MENTALES  AP -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregarmentalAP == true "><button class="botonperron"
                          (click)="ocultarbtnagregarmentalAP = !ocultarbtnagregarmentalAP;habilitarInputs([tipo_enfermedad_mental]); mostrarCamposEnfermedadesMentalesAP()">
                          agregar enfermedad mental</button></div>
                      <div class="row" *ngIf="tablaMentalAP == null">Este paciente no tiene enfermedades mentales</div>
                    </div>

                    <table mat-table [dataSource]="tablaMentalAP" class="mat-elevation-z8 tabla"
                      *ngIf="tablaMentalAP != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="observacion">
                        <th mat-header-cell *matHeaderCellDef> Observación </th>
                        <td mat-cell *matCellDef="let element"> {{element.observacion}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAP(element.id_enfermedad);   ">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="botonesE">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="editarMentalAP(element.id_enfermedad);ocultarbtnagregarmentalAP = false;    mostrarCamposEnfermedadesMentalesAP();">
                            <mat-icon>create</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaMentalAP"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaMentalAP;"></tr>
                    </table>
                  </div>
                </mat-card>
              </div>
            </div>



            <div class="row">
              <div class="col">
                <mat-card style="margin-top: 15px;">


                  <!-- ALERGIAS AP -->

                  <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->
                  <form [formGroup]="formulario_antecedentes_personales">
                    <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposAlergiasAP">

                      <mat-form-field>
                        <input matInput formControlName="tipo_alergia" placeholder="Tipo alergia" id="inputAlergiaAP">
                        <mat-error style="margin-left: 0;" *ngIf="tipo_alergia.hasError('pattern')">no valido
                        </mat-error>
                      </mat-form-field>
                      &nbsp; &nbsp;

                      <mat-form-field class="medium-width">
                        <textarea matInput formControlName="observacion_alergias" cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3"
                          style="overflow: hidden;"
                          placeholder="Añada una observación en caso de ser necesario"></textarea>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('maxlength')">campo muy extenso
                        </mat-error>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('minlength')">introduzca una observación
                          válida
                        </mat-error>
                      </mat-form-field>
                      <button mat-icon-button (click)="agregarAlergiasAP();" class="botonesTabla">
                        <mat-icon>save</mat-icon>
                      </button>
                    </div>
                  </form>

                  <!-- TABLA SOLO ALERGIAS  AP -->

                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregaralergiaAP == true "><button class="botonperron"
                          (click)="ocultarbtnagregaralergiaAP = !ocultarbtnagregaralergiaAP;habilitarInputs([tipo_alergia]); mostrarCamposAlergiasAP()">
                          agregar alergia</button></div>
                      <div class="row" *ngIf="tablaAlergiaAP == null">Este paciente no tiene alergias</div>
                    </div>
                    <table mat-table [dataSource]="tablaAlergiaAP" class="mat-elevation-z8 tabla"
                      *ngIf="tablaAlergiaAP != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="observacion">
                        <th mat-header-cell *matHeaderCellDef> Observación </th>
                        <td mat-cell *matCellDef="let element"> {{element.observacion}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAP(element.id_enfermedad)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="botonesE">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="editarAlergiaAP(element.id_enfermedad); ocultarbtnagregaralergiaAP= false;    mostrarCamposAlergiasAP();">
                            <mat-icon>create</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaAlergiaAP"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaAlergiaAP;"></tr>
                    </table>
                  </div>
                </mat-card>
              </div>



              <div class="col">
                <mat-card style="margin-top: 15px;">


                  <!--  CANCERES AP -->

                  <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->
                  <form [formGroup]="formulario_antecedentes_personales">
                    <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposCanceresAP">

                      <mat-form-field>
                        <input matInput formControlName="tipo_cancer" placeholder="Tipo cáncer" id="InputCancerAP">
                        <mat-error style="margin-left: 0;" *ngIf="tipo_cancer.hasError('pattern')">no valido</mat-error>
                      </mat-form-field>
                      &nbsp; &nbsp;

                      <mat-form-field class="medium-width">
                        <textarea matInput formControlName="observacion_cancer" cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3"
                          style="overflow: hidden;"
                          placeholder="Añada una observación en caso de ser necesario"></textarea>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('maxlength')">campo muy extenso
                        </mat-error>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('minlength')">introduzca una observación
                          válida
                        </mat-error>
                      </mat-form-field>

                      <button mat-icon-button (click)="agregarCanceresAP();" class="botonesTabla">
                        <mat-icon>save</mat-icon>
                      </button>
                    </div>
                  </form>


                  <!-- TABLA SOLO CANCERES  AP -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregarcancerAP == true "><button class="botonperron"
                          (click)="ocultarbtnagregarcancerAP = !ocultarbtnagregarcancerAP;habilitarInputs([tipo_cancer]); mostrarCamposCancerAP()">
                          agregar cancer</button></div>
                      <div class="row" *ngIf="tablaCancerAP == null">Este paciente no tiene canceres</div>
                    </div>
                    <table mat-table [dataSource]="tablaCancerAP" class="mat-elevation-z8 tabla"
                      *ngIf="tablaCancerAP != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="observacion">
                        <th mat-header-cell *matHeaderCellDef> Observación </th>
                        <td mat-cell *matCellDef="let element"> {{element.observacion}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAP(element.id_enfermedad)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="botonesE">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="editarCancerAP(element.id_enfermedad);   ocultarbtnagregarcancerAP  = false;    mostrarCamposCancerAP();">
                            <mat-icon>create</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaCancerAP"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaCancerAP;"></tr>
                    </table>
                  </div>
                </mat-card>
              </div>
            </div>




            <div class="row">
              <div class="col">
                <mat-card style="margin-top: 15px;">

                  <!-- ENFERMEDADES OTROS AP -->
                  <!-- el id de este div me sirve para traerlo en el componet.ts y poder ocultarlo -->
                  <form [formGroup]="formulario_antecedentes_personales">
                    <div class="col" style="display: none;padding: 0px;" id="divAgregarTiposOtrosAP">

                      <mat-form-field>
                        <input matInput formControlName="otros" placeholder="otros" id="InputOtroAP">
                        <mat-error style="margin-left: 0;" *ngIf="otros.hasError('pattern')">no valido</mat-error>
                      </mat-form-field>
                      &nbsp; &nbsp;

                      <mat-form-field class="medium-width">
                        <textarea matInput formControlName="observacion_otros" cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3"
                          style="overflow: hidden;"
                          placeholder="Añada una observación en caso de ser necesario"></textarea>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('maxlength')">campo muy extenso
                        </mat-error>
                        <mat-error *ngIf="observacion_desnutricion_ap.hasError('minlength')">introduzca una observación
                          válida
                        </mat-error>
                      </mat-form-field>

                      <button mat-icon-button (click)="agregarOtroAP();" class="botonesTabla">
                        <mat-icon>save</mat-icon>
                      </button>
                    </div>
                  </form>


                  <!-- TABLA SOLO OTROS  AP -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregarotroAP == true "><button class="botonperron"
                          (click)="ocultarbtnagregarotroAP = !ocultarbtnagregarotroAP;habilitarInputs([otros]); mostrarCamposOtroAP();">
                          agregar otra enfermedad</button></div>
                      <div class="row" *ngIf="tablaOtroAP == null">Este paciente no tiene otras enfermedades</div>
                    </div>
                    <table mat-table [dataSource]="tablaOtroAP" class="mat-elevation-z8 tabla"
                      *ngIf="tablaOtroAP != null" style="margin-right: 16px;">
                      <ng-container matColumnDef="grupoenfermedad">
                        <th mat-header-cell *matHeaderCellDef> # </th>
                        <a>eliminar</a>
                        <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad </th>
                        <td mat-cell *matCellDef="let element"> {{element.enfermedad}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="observacion">
                        <th mat-header-cell *matHeaderCellDef> Observación </th>
                        <td mat-cell *matCellDef="let element"> {{element.observacion}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarDesnutricionAP(element.id_enfermedad)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="botonesE">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="editarOtroAP(element.id_enfermedad); ocultarbtnagregarotroAP = false;    mostrarCamposOtroAP();">
                            <mat-icon>create</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnasTablaOtroAP"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasTablaOtroAP;"></tr>
                    </table>
                  </div>

                </mat-card>
              </div>




              <div class="col">
                <mat-card style="margin-top: 15px;">





                  <!-- HOSPITALARIAS QUIRURJICAS -->
                  <form [formGroup]="formulario_antecedentes_personales">
                    <div style="display: none;padding: 0px;" id="divAgregarTiposHospitalariasQ">
                      <div class="row">
                        <div class="col">
                          <mat-form-field class="example-full-width">
                            <input matInput formControlName="fecha_antecedente_hospitalario" [min]="minDate"
                              [max]="maxDate" [matDatepicker]="picker2" placeholder="Fecha" readonly="true">
                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                            <mat-datepicker #picker2></mat-datepicker>
                            <mat-error style="margin-left: 0;"
                              *ngIf="fecha_antecedente_hospitalario.hasError('required')">
                              !campo requerido!
                            </mat-error>
                          </mat-form-field>
                        </div>

                        <div class="col">
                          <mat-form-field class="example-full-width">
                            <input matInput formControlName="tiempo_hospitalizacion"
                              placeholder="Tiempo Hospitalización">
                            <mat-error *ngIf="tiempo_hospitalizacion.hasError('maxlength')">campo muy extenso
                            </mat-error>
                            <mat-error *ngIf="tiempo_hospitalizacion.hasError('minlength')">introduzca una observación
                              válida
                            </mat-error>
                            <mat-datepicker #picker2></mat-datepicker>
                            <mat-error style="margin-left: 0;" *ngIf="tiempo_hospitalizacion.hasError('required')">
                              !campo requerido!
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col">
                          <mat-form-field class="example-full-width">
                            <textarea matInput formControlName="diagnostico" placeholder="Diagnóstico"
                              cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                              cdkAutosizeMaxRows="3" style="overflow: hidden;"></textarea>
                            <mat-error *ngIf="diagnostico.hasError('maxlength')">campo muy extenso</mat-error>
                            <mat-error *ngIf="diagnostico.hasError('minlength')">introduzca una observación válida
                            </mat-error>
                            <mat-error style="margin-left: 0;" *ngIf="diagnostico.hasError('required')">
                              !campo requerido!
                            </mat-error>
                          </mat-form-field>
                        </div>

                        <div class="col">

                          <mat-form-field class="example-full-width">
                            <textarea matInput formControlName="tratamiento" cdkTextareaAutosize
                              #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3"
                              style="overflow: hidden;" placeholder="Tratamiento"></textarea>
                            <mat-error *ngIf="tratamiento.hasError('maxlength')">campo muy extenso</mat-error>
                            <mat-error *ngIf="tratamiento.hasError('minlength')">introduzca una observación válida
                            </mat-error>
                            <mat-error style="margin-left: 0;" *ngIf="tratamiento.hasError('required')">
                              !campo requerido!
                            </mat-error>
                          </mat-form-field>


                          <button mat-icon-button class="float-right" (click)="agregarHospitalariasQuirurgicas();"
                            class="botonesTabla">
                            <mat-icon>save</mat-icon>
                          </button>


                        </div>

                      </div>
                    </div>
                  </form>

                  <!-- TABLA DE HOSPITALARIAS QUIRURGICAS -->
                  <div class="row medium-width" style="margin-left: 0;">
                    <div class="col">
                      <div class="row" *ngIf="ocultarbtnagregarhospitalaria == true "><button class="botonperron"
                          (click)="ocultarbtnagregarhospitalaria = !ocultarbtnagregarhospitalaria; mostrarCamposHospitalariasQuirurgicas();">
                          agregar una hospitalario quirurgica</button></div>
                      <div class="row" *ngIf="tablahospitalarias == null">Este paciente no tiene hospitalarias
                        quirurgicas</div>
                    </div>
                    <table mat-table [dataSource]="tablahospitalarias" class="mat-elevation-z8 tabla"
                      *ngIf="tablahospitalarias != null" style="margin-right: 16px;">

                      <ng-container matColumnDef="fecha">
                        <th mat-header-cell *matHeaderCellDef> Fecha</th>
                        <td mat-cell *matCellDef="let element; "> {{element.fecha}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="tiempo_hospitalizacion">
                        <th mat-header-cell *matHeaderCellDef> Tiempo Hospitalización </th>
                        <td mat-cell *matCellDef="let element"> {{element.tiempo_hospitalizacion}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="diagnostico">
                        <th mat-header-cell *matHeaderCellDef> Diagnóstico </th>
                        <td mat-cell *matCellDef="let element"> {{element.diagnostico}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="tratamiento">
                        <th mat-header-cell *matHeaderCellDef> Tratamiento </th>
                        <td mat-cell *matCellDef="let element"> {{element.tratamiento}} </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="botones">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="eliminarHospitalaria(element.id_hospitalaria_quirurgica)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="botonesE">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element;">
                          <button mat-icon-button class="botonesTabla"
                            (click)="editarHospitalariaAP(element.id_hospitalaria_quirurgica);  ocultarbtnagregarhospitalaria = !ocultarbtnagregarhospitalaria; mostrarCamposHospitalariasQuirurgicas();">
                            <mat-icon>create</mat-icon>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="columnashospitalariaseditar"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnashospitalariaseditar;"></tr>
                    </table>
                  </div>

                </mat-card>
              </div>
            </div>



            <button mat-raised-button class=" float-right botonperron" style="margin-top: 10px;" (click)="readonlyAntecedentesPersonales = !readonlyAntecedentesPersonales; 
            agregarDesnutricionesAP();agregarEnfermedadesMentalesAP();agregarAlergiasAP();
            agregarCanceresAP();agregarOtroAP();agregarHospitalariasQuirurgicas();">
              {{!readonlyAntecedentesPersonales ? 'Regresar' : 'Editar'}}
            </button>


          </div>

        </mat-expansion-panel>














        <mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6 class="titlepanel">Hábitos Toxicológicos Personales</h6>
            </mat-panel-title>
            <mat-panel-description>
              Visualiazar Hábitos Toxicológicos Personales del paciente
              <!-- <mat-icon>date_range</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div *ngIf="readonlyHabitosToxicologicos == true">
            <div>

              <label *ngIf="tablaHabitosToxicologicos == null">Este paciente no tiene hábitos toxicológico</label>
              <table mat-table id="tabla3" [dataSource]="tablaHabitosToxicologicos" class="mat-elevation-z8"
                *ngIf="tablaHabitosToxicologicos != null">

                <!-- columna antecedente -->
                <ng-container matColumnDef="habito_toxicologico">
                  <th mat-header-cell *matHeaderCellDef> Hábito Toxicológico </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.habito_toxicologico}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>


                <!-- columna observaccion -->
                <ng-container matColumnDef="observacion">
                  <th mat-header-cell *matHeaderCellDef> Observación </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.observacion}}</td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="columnastablaHabitosToxicologicos"></tr>
                <tr mat-row *matRowDef="let row; columns: columnastablaHabitosToxicologicos;"></tr>
                <tr mat-footer-row *matFooterRowDef="columnastablaHabitosToxicologicos"></tr>
              </table>


              <button mat-raised-button class="btn btn-outline-primary float-right botonperron"
                style="margin-top: 10px;"
                (click)="readonlyHabitosToxicologicos = !readonlyHabitosToxicologicos;ocultarbtnagregartoxicologico = true">
                {{!readonlyHabitosToxicologicos ? 'Regresar' : 'Editar'}}
              </button>
            </div>
          </div>


          <!-- AQUI SE ESTA EDITANDO -->

          <div *ngIf="readonlyHabitosToxicologicos == false">

            <mat-card>
              <form [formGroup]="formulario_habito_toxicologico_personal">

                <div style="display: none;padding: 0px;" id="divAgregarToxicologicos">
                  <div class="row" style="margin-left: 0;">
                    <mat-form-field>
                      <input matInput formControlName="otros" placeholder="agrega otro hábito toxicológico"
                        id="inputOtrosHT">
                      <mat-error *ngIf="otros_ht.hasError('maxlength')">campo muy extenso</mat-error>
                      <mat-error *ngIf="otros_ht.hasError('minlength')">introduzca una observación válida</mat-error>
                    </mat-form-field>

                    &nbsp; &nbsp;

                    <mat-form-field class="medium-width" *ngIf="otros_ht.value">
                      <textarea matInput formControlName="observacion_otros" placeholder="Observacion"
                        cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                        cdkAutosizeMaxRows="3" style="overflow: hidden;"></textarea>
                      <mat-error *ngIf="observacion_otros_ht.hasError('maxlength')">campo muy extenso</mat-error>
                      <mat-error *ngIf="observacion_otros_ht.hasError('minlength')">introduzca una observación válida
                      </mat-error>
                    </mat-form-field>

                    <button mat-icon-button class="float-right" (click)="agregarHabitoToxicologico();"
                      class="botonesTabla">
                      <mat-icon>save</mat-icon>
                    </button>
                  </div>
                </div>

              </form>


              <div class="col">
                <div class="row" *ngIf="ocultarbtnagregartoxicologico == true "><button class="botonperron"
                    (click)="ocultarbtnagregartoxicologico = !ocultarbtnagregartoxicologico;mostrarCamposToxicologicos();">
                    agregar un hábito toxicológico</button></div>
                <div class="row" *ngIf="tablaHabitosToxicologicos == null">Este paciente no hábitos toxicológicos</div>
              </div>
              <table mat-table id="tabla3" [dataSource]="tablaHabitosToxicologicos" class="mat-elevation-z8"
                *ngIf="tablaHabitosToxicologicos != null" style="margin-right: 16px;">

                <ng-container matColumnDef="numero">
                  <th mat-header-cell *matHeaderCellDef> # </th>
                  <td mat-cell *matCellDef="let element; index as i;"> {{i + 1}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- columna antecedente -->
                <ng-container matColumnDef="habito_toxicologico">
                  <th mat-header-cell *matHeaderCellDef> Hábito Toxicológico </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.habito_toxicologico}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- columna observaccion -->
                <ng-container matColumnDef="observacion">
                  <th mat-header-cell *matHeaderCellDef> Observación </th>
                  <td mat-cell *matCellDef="let elemento"> {{elemento.observacion}}</td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- columna botoneliminar  -->
                <ng-container matColumnDef="botoneliminar">
                  <th mat-header-cell *matHeaderCellDef> </th>
                  <td mat-cell *matCellDef="let elemento"><button mat-icon-button class="float-right"
                      (click)="eliminarHabitoToxicologico(elemento.id_paciente_habito_toxicologico);"
                      class="botonesTabla">
                      <mat-icon>delete</mat-icon>
                    </button> </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- columna botoneditar  -->
                <ng-container matColumnDef="botoneditar">
                  <th mat-header-cell *matHeaderCellDef> </th>
                  <td mat-cell *matCellDef="let elemento"><button mat-icon-button class="float-right"
                      (click)="actualizarHabitosToxicologicos(elemento.id_paciente_habito_toxicologico);   ocultarbtnagregartoxicologico = false;    mostrarCamposToxicologicos();"
                      class="botonesTabla">
                      <mat-icon>create</mat-icon>
                    </button> </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="columnastablaHabitosToxicologicosEditar"></tr>
                <tr mat-row *matRowDef="let row; columns: columnastablaHabitosToxicologicosEditar;"></tr>
                <tr mat-footer-row *matFooterRowDef="columnastablaHabitosToxicologicosEditar"></tr>
              </table>
            </mat-card>


            <button mat-raised-button class="btn btn-outline-primary float-right botonperron" style="margin-top: 10px;"
              (click)="readonlyHabitosToxicologicos = !readonlyHabitosToxicologicos; ">
              {{!readonlyHabitosToxicologicos ? 'Regresar' : 'Editar'}}
            </button>
          </div>
        </mat-expansion-panel>






















        <mat-expansion-panel [expanded]="step === 4" (opened)="setStep(4)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6 class="titlepanel"> Actividad Sexual y Reproductiva</h6>
            </mat-panel-title>
            <mat-panel-description>
              Visualiazar Actividad Sexual y Reproductiva del paciente
              <!-- <mat-icon>date_range</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div *ngIf="readonlyActividadSexual">
            <div>



              <form [formGroup]="formulario_actividad_sexual">
                <div class="row">

                  <div class="col">
                    <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                      <mat-label><b>Actividad Sexual</b></mat-label>
                      <input matInput formControlName="actividad_sexual" placeholder="No"
                        [readonly]="readonlyActividadSexual">
                      <mat-error *ngIf="tiempo_hospitalizacion.hasError('maxlength')">campo muy extenso</mat-error>
                      <mat-error *ngIf="tiempo_hospitalizacion.hasError('minlength')">introduzca una observación válida
                      </mat-error>
                    </mat-form-field>

                    <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                      <mat-label><b>Número de parejas sexuales</b></mat-label>
                      <input matInput formControlName="numero_parejas_sexuales" placeholder="No especificada aún"
                        [readonly]="readonlyActividadSexual">
                      <mat-error *ngIf="tiempo_hospitalizacion.hasError('maxlength')">campo muy extenso</mat-error>
                      <mat-error *ngIf="tiempo_hospitalizacion.hasError('minlength')">introduzca una observación válida
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <div class="col">
                    <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                      <mat-label><b>Edad inicio sexual</b></mat-label>
                      <input matInput formControlName="edad_inicio_sexual" placeholder="No especificada aún"
                        [readonly]="readonlyActividadSexual">
                      <mat-error *ngIf="tiempo_hospitalizacion.hasError('maxlength')">campo muy extenso</mat-error>
                      <mat-error *ngIf="tiempo_hospitalizacion.hasError('minlength')">introduzca una observación válida
                      </mat-error>
                    </mat-form-field>

                    <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                      <mat-label><b>Práctica sexual de riesgo</b></mat-label>
                      <input matInput formControlName="practicas_sexuales_riesgo" placeholder="No especificada aún"
                        [readonly]="readonlyActividadSexual">
                      <mat-error *ngIf="tiempo_hospitalizacion.hasError('maxlength')">campo muy extenso</mat-error>
                      <mat-error *ngIf="tiempo_hospitalizacion.hasError('minlength')">introduzca una observación válida
                      </mat-error>
                    </mat-form-field>

                  </div>

                </div>
              </form>

            </div>
            <button mat-raised-button class="btn btn-outline-primary float-right botonperron" style="margin-top: 10px;"
              (click)="readonlyActividadSexual = !readonlyActividadSexual; cambiarInformacionActividadSexual(); cargarActSexParaAct();">
              {{!readonlyActividadSexual ? 'Guardar' : 'Editar'}}
            </button>
          </div>


          <div *ngIf="!readonlyActividadSexual">
            <form [formGroup]="formulario_actividad_sexual">

              <div class="row">
                <div class="col">
                  <mat-radio-group formControlName="actividad_sexual" aria-labelledby="example-radio-group-label"
                    class="example-radio-group">
                    <mat-radio-button value="Si"
                      (click)="habilitarInputsinvalidacion([edad_inicio_sexual, numero_parejas_sexuales, practicas_sexuales_riesgo])">
                      Si</mat-radio-button> &nbsp;
                    <mat-radio-button value="No"
                      (click)="borrarInputs([edad_inicio_sexual, numero_parejas_sexuales, practicas_sexuales_riesgo])">
                      No</mat-radio-button>
                  </mat-radio-group>
                  <mat-error style="margin-inline-start: 5px;" *ngIf="actividad_sexuall.hasError('required')">campo
                    requerido</mat-error>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Edad inicio vida sexual</b></mat-label>
                    <input matInput formControlName="edad_inicio_sexual" type="number"
                      placeholder="Ingrese la edad inicio vida sexual">
                    <mat-error *ngIf="edad_inicio_sexual.hasError('max')">edad invalida</mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label><b>Número de parejas sexuales</b></mat-label>
                    <input matInput formControlName="numero_parejas_sexuales" type="number"
                      placeholder="Ingrese el número de parejas sexuales">
                    <mat-error *ngIf="numero_parejas_sexuales.hasError('max')">muy extenso</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Práctica sexual de riesgo</mat-label>
                    <mat-select formControlName="practicas_sexuales_riesgo">
                      <mat-option *ngFor="let practica_sexual of practicas_sexuales" [value]="practica_sexual.value">
                        {{practica_sexual.viewValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>

            </form>

            <button mat-raised-button class="btn btn-outline-primary float-right botonperron" style="margin-top: 10px;"
              (click)="readonlyActividadSexual = !readonlyActividadSexual; actualizarActividadSexual();cambiarInformacionActividadSexual();"
              disabled={{formulario_actividad_sexual.invalid}}>
              {{!readonlyActividadSexual ? 'Guardar' : 'Editar'}}
            </button>

          </div>
        </mat-expansion-panel>

















        <mat-expansion-panel [expanded]="step === 5" (opened)="setStep(5)" hideToggle
          *ngIf="mostrarAntecedenteGinecologico == true">

          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6 class="titlepanel"> Antecedentes Ginecológicos</h6>
            </mat-panel-title>
            <mat-panel-description>
              Visualiazar Antecedentes Ginecológicos del paciente
              <!-- <mat-icon>date_range</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div *ngIf="readonlyAntecedentesGinecologicos">

            <form [formGroup]="formulario_antecedente_ginecologico">

              <div class="row">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Edad inicio menstruación</b></mat-label>
                    <input matInput formControlName="edad_inicio_menstruacion" type="number"
                      placeholder="No especificada aún" readonly="readonly">
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('max')">edad incorrecta</mat-error>
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('min')">edad incorrecta</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Fecha ultima menstruación</b></mat-label>
                    <input matInput formControlName="fum" placeholder="No especificada aún" readonly="readonly">
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('max')">edad incorrecta</mat-error>
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('min')">edad incorrecta</mat-error>
                  </mat-form-field>
                </div>
              </div>


              <mat-divider></mat-divider>

              <div class="row" style="margin-top: 19px;">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Duración ciclo menstrual</b></mat-label>
                    <input matInput formControlName="duracion_ciclo_menstrual" placeholder="No especificado aún"
                      readonly="readonly">
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Periocidad ciclo menstrual </b></mat-label>
                    <input matInput formControlName="periocidad_ciclo_menstrual" placeholder="No especificado aún"
                      readonly="readonly">
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Caracteristicas ciclo menstrual </b></mat-label>
                    <input matInput formControlName="caracteristicas_ciclo_menstrual" placeholder="No especificadas aún"
                      readonly="readonly">
                  </mat-form-field>
                </div>
              </div>

              <mat-divider></mat-divider>

              <div class="row" style="margin-top: 19px;">
                <div class="col-md-4">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Citologías</b></mat-label>
                    <input matInput formControlName="citologia" placeholder="No especificada aún" readonly="readonly">
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('max')">edad incorrecta</mat-error>
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('min')">edad incorrecta</mat-error>
                  </mat-form-field>
                </div>

                <div class="col-md-4" *ngIf="vercitologia == true">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Fecha Citología</b></mat-label>
                    <input matInput formControlName="fecha_citologia" placeholder="No especificada aún"
                      readonly="readonly">
                  </mat-form-field>
                </div>

                <div class="col-md-4" *ngIf="vercitologia == true">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Resultado Citología</b></mat-label>
                    <textarea matInput formControlName="resultado_citologia" placeholder="No especificado aún"
                      readonly="readonly" cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                      cdkAutosizeMaxRows="3" style="overflow: hidden;"></textarea>
                  </mat-form-field>
                </div>
              </div>




            </form>

            <button mat-raised-button class="btn btn-outline-primary float-right botonperron" style="margin-top: 10px;"
              (click)="readonlyAntecedentesGinecologicos = !readonlyAntecedentesGinecologicos;cargarAntecedentesGinecologicos(); ">
              {{!readonlyAntecedentesGinecologicos ? 'Guardar' : 'Editar'}}
            </button>
          </div>




          <div *ngIf="!readonlyAntecedentesGinecologicos">

            <form [formGroup]="formulario_antecedente_ginecologico">
              <div class="row">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Edad inicio menstruación</mat-label>
                    <input matInput formControlName="edad_inicio_menstruacion" name="edad_inicio_menstruacion"
                      type="number" placeholder="Ingrese la edad de inicio menstruación ">
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('required')">campo requerido</mat-error>
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('max')">edad incorrecta</mat-error>
                    <mat-error *ngIf="edad_inicio_menstruacion.hasError('min')">edad incorrecta</mat-error>
                  </mat-form-field>

                </div>
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <input matInput formControlName="fum" readonly="readonly" [min]="minDate" [max]="maxDate"
                      [matDatepicker]="picker3" placeholder="Fecha ultima menstruación">
                    <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                    <mat-datepicker #picker3></mat-datepicker>
                    <mat-error *ngIf="fum.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>
              </div>

              <mat-divider></mat-divider>

              <div class="row" style="margin-top: 20px;">
                <div class="col">
                  <div style="margin-top: 20px;">
                    <label id="example-radio-group-label">Citologías</label>&nbsp;&nbsp;
                    <mat-error style="margin-inline-start: 5px;" *ngIf="citologia.hasError('required')">campo requerido
                    </mat-error>
                    <mat-radio-group formControlName="citologia" aria-labelledby="example-radio-group-label"
                      class="example-radio-group">
                      <mat-radio-button value="Si"
                        (click)="habilitarInputsinvalidacion([fecha_citologia, resultado_citologia])"> Si
                      </mat-radio-button> &nbsp;
                      <mat-radio-button value="No" (click)="borrarInputs([fecha_citologia, resultado_citologia])">No
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>

                <div class="col" style="text-align: left;padding-left: 0;">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <input matInput formControlName="fecha_citologia" [matDatepicker]="picker4"
                      placeholder="Fecha Citología" readonly="readonly">
                    <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                    <mat-datepicker #picker4></mat-datepicker>
                  </mat-form-field>
                </div>

                <div class="col" style="text-align: left;padding-left: 0;">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Resultado Citología</mat-label>
                    <textarea matInput formControlName="resultado_citologia"
                      placeholder="Ingrese el resultado citología" cdkTextareaAutosize #autosize="cdkTextareaAutosize"
                      cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3" style="overflow: hidden;"></textarea>
                  </mat-form-field>
                </div>
              </div>

              <mat-divider></mat-divider>


              <div class="row" style="margin-top: 20px;">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Duración ciclo menstrual</mat-label>
                    <input matInput formControlName="duracion_ciclo_menstrual"
                      placeholder="Ingrese la duración ciclo menstrual">
                    <mat-error *ngIf="duracion_ciclo_menstrual.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Periodicidad ciclo menstrual</mat-label>
                    <mat-select formControlName="periocidad_ciclo_menstrual" name="periocidad_ciclo_menstrual">
                      <mat-option *ngFor="let periocidad of periocidades" [value]="periocidad.value">
                        {{periocidad.viewValue}}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="periocidad_ciclo_menstrual.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Características ciclo menstrual</mat-label>
                    <mat-select formControlName="caracteristicas_ciclo_menstrual"
                      name="Características ciclo menstrual">
                      <mat-option *ngFor="let caracteristica of caracteristicas" [value]="caracteristica.value">
                        {{caracteristica.viewValue}}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="caracteristicas_ciclo_menstrual.hasError('required')">campo requerido</mat-error>
                  </mat-form-field>
                </div>
              </div>

            </form>

            <button mat-raised-button class="btn btn-outline-primary float-right botonperron" style="margin-top: 10px;"
              disabled={{formulario_antecedente_ginecologico.invalid}} (click)="readonlyAntecedentesGinecologicos = !readonlyAntecedentesGinecologicos;
    actualizarAntecedentesGinecologicos()">
              {{!readonlyAntecedentesGinecologicos ? 'Guardar' : 'Editar'}}
            </button>
          </div>

        </mat-expansion-panel>














        <mat-expansion-panel [expanded]="step === 6" (opened)="setStep(6)" hideToggle
          *ngIf="mostrarAntecedenteObstetrico == true">

          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6 class="titlepanel"> Antecedentes Obstétricos</h6>
            </mat-panel-title>
            <mat-panel-description>
              Visualiazar Antecedentes Obstétricos del paciente
              <!-- <mat-icon>date_range</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>


          <div>
            <form [formGroup]="formulario_antecedente_obstetrico">
              <div class="row">

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Número de partos</b></mat-label>
                    <input matInput formControlName="partos" type="number" placeholder="No especificado aún"
                      [readonly]="readonlyAntecedentesObstetricos">
                    <mat-error *ngIf="partos.hasError('max')">invalido</mat-error>
                    <mat-error *ngIf="partos.hasError('min')">invalido</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Número de abortos</b></mat-label>
                    <input matInput formControlName="abortos" type="number" placeholder="No especificado aún"
                      [readonly]="readonlyAntecedentesObstetricos">
                    <mat-error *ngIf="abortos.hasError('max')">invalido</mat-error>
                    <mat-error *ngIf="abortos.hasError('min')">invalido</mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Número de cesarias</b></mat-label>
                    <input matInput formControlName="cesarias" type="number" placeholder="No especificado aún"
                      [readonly]="readonlyAntecedentesObstetricos">
                    <mat-error *ngIf="cesarias.hasError('max')">invalido</mat-error>
                    <mat-error *ngIf="cesarias.hasError('min')">invalido</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Número de hijos vivos</b></mat-label>
                    <input matInput formControlName="hijos_vivos" type="number" placeholder="No especificado aún"
                      [readonly]="readonlyAntecedentesObstetricos">
                    <mat-error *ngIf="hijos_vivos.hasError('max')">invalido</mat-error>
                    <mat-error *ngIf="hijos_vivos.hasError('min')">invalido</mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Número de hijos muertos</b></mat-label>
                    <input matInput formControlName="hijos_muertos" type="number" placeholder="No especificado aún"
                      [readonly]="readonlyAntecedentesObstetricos">
                    <mat-error *ngIf="hijos_muertos.hasError('max')">invalido</mat-error>
                    <mat-error *ngIf="hijos_muertos.hasError('min')">invalido</mat-error>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'"
                    *ngIf="readonlyAntecedentesObstetricos">
                    <mat-label><b>Fecha termino último embarazo</b></mat-label>
                    <input matInput formControlName="fecha_termino_ult_embarazo" placeholder="No especificada aún"
                      [readonly]="readonlyAntecedentesObstetricos">
                    <mat-error *ngIf="hijos_muertos.hasError('max')">invalido</mat-error>
                    <mat-error *ngIf="hijos_muertos.hasError('min')">invalido</mat-error>
                  </mat-form-field>

                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'"
                    *ngIf="!readonlyAntecedentesObstetricos">
                    <mat-label><b>Fecha último embarazo</b></mat-label>
                    <input matInput formControlName="fecha_termino_ult_embarazo" [min]="minDate" [max]="maxDate"
                      [matDatepicker]="picker5" placeholder="No especificada aún" readonly="readonly">
                    <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
                    <mat-datepicker #picker5></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'"
                    *ngIf="readonlyAntecedentesObstetricos">
                    <mat-label><b>Resultado último embarazo</b></mat-label>
                    <input matInput formControlName="descripcion_termino_ult_embarazo" placeholder="No especificado aún"
                      [readonly]="readonlyAntecedentesObstetricos">
                  </mat-form-field>

                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'"
                    *ngIf="!readonlyAntecedentesObstetricos">
                    <mat-label>Resultado ultimo embarazo</mat-label>
                    <mat-select formControlName="descripcion_termino_ult_embarazo"
                      name="descripcion_termino_ult_embarazo">
                      <mat-option *ngFor="let resultado_embarazo of resultados_embarazos"
                        [value]="resultado_embarazo.value">
                        {{resultado_embarazo.viewValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Observaciones</b></mat-label>
                    <textarea matInput formControlName="observaciones" placeholder="No especificadas aún"
                      [readonly]="readonlyAntecedentesObstetricos" cdkTextareaAutosize #autosize="cdkTextareaAutosize"
                      cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3" style="overflow: hidden;"></textarea>
                    <mat-error *ngIf="observaciones.hasError('maxlength')">campo muy extenso</mat-error>
                    <mat-error *ngIf="observaciones.hasError('minlength')">introduzca una observación válida</mat-error>
                  </mat-form-field>
                </div>
              </div>
            </form>

            <button mat-raised-button class="btn btn-outline-primary float-right botonperron" style="margin-top: 10px;"
              disabled={{formulario_antecedente_obstetrico.invalid}}
              (click)="readonlyAntecedentesObstetricos = !readonlyAntecedentesObstetricos; actualizarAntecedentesObstetricos();cargarAntecedentesObstetricosActualizar();">
              {{!readonlyAntecedentesObstetricos ? 'Guardar' : 'Editar'}}
            </button>
          </div>

        </mat-expansion-panel>
















        <mat-expansion-panel [expanded]="step === 7" (opened)="setStep(7)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6 class="titlepanel"> Planificación Familiar</h6>
            </mat-panel-title>
            <mat-panel-description>
              Visualiazar Planificación Familiar del paciente
              <!-- <mat-icon>date_range</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div *ngIf="readonlyPlanificacionFamiliar">

            <form [formGroup]="formulario_planificacion_familiar">
              <div class="row">

                <div class="col-md-4">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Planificación familiar</b></mat-label>
                    <input matInput formControlName="planificacion_familiar" placeholder="No"
                      [readonly]="readonlyPlanificacionFamiliar">
                  </mat-form-field>
                </div>

                <div class="col-md-4" *ngIf="verplanificacion == true">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Método de planificación</b></mat-label>
                    <input matInput formControlName="metodo_planificacion" placeholder="No especificado aún"
                      [readonly]="readonlyPlanificacionFamiliar">
                  </mat-form-field>
                </div>

                <div class="col-md-4" *ngIf="verplanificacion == true">
                  <mat-form-field class="example-full-width" appearance="fill" [floatLabel]="'always'">
                    <mat-label><b>Observación</b></mat-label>
                    <textarea matInput formControlName="observacion_planificacion" placeholder="No especificada aún"
                      [readonly]="readonlyPlanificacionFamiliar" cdkTextareaAutosize #autosize="cdkTextareaAutosize"
                      cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3" style="overflow: hidden;"></textarea>
                  </mat-form-field>
                </div>
              </div>
            </form>

            <button mat-raised-button class="btn btn-outline-primary float-right botonperron" style="margin-top: 10px;"
              (click)="readonlyPlanificacionFamiliar = !readonlyPlanificacionFamiliar;cargarPlanificacionFamiliarActualizar();cambiarInformacionPlanificacionFamiliar();">
              {{!readonlyPlanificacionFamiliar ? 'Guardar' : 'Editar'}}
            </button>
          </div>




          <div *ngIf="!readonlyPlanificacionFamiliar">
            <form [formGroup]="formulario_planificacion_familiar">

              <div class="row">
                <div class="col">
                  <mat-radio-group formControlName="planificacion_familiar" aria-labelledby="example-radio-group-label"
                    class="example-radio-group">
                    <mat-radio-button value="Si"
                      (click)="habilitarInputsinvalidacion([metodo_planificacion, observacion_planificacion])">Si
                    </mat-radio-button> &nbsp;
                    <mat-radio-button value="No"
                      (click)="borrarInputs([metodo_planificacion, observacion_planificacion]);">No</mat-radio-button>
                  </mat-radio-group>
                  <mat-error style="margin-left: 0;" *ngIf="planificacion_familiarr.hasError('required')">Campo
                    requerido
                  </mat-error>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Método de planificación</mat-label>
                    <mat-select formControlName="metodo_planificacion">
                      <mat-option *ngFor="let metodo of metodos" [value]="metodo.value">
                        {{metodo.viewValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Observación</mat-label>
                    <textarea matInput formControlName="observacion_planificacion" placeholder="Ingrese una observación"
                      cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="3"
                      style="overflow: hidden;"></textarea>
                    <mat-error *ngIf="observacion_planificacion.hasError('maxlength')">campo muy extenso</mat-error>
                    <mat-error *ngIf="observacion_planificacion.hasError('minlength')">introduzca una observación válida
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <button mat-raised-button class="btn btn-outline-primary float-right botonperron"
                style="margin-top: 10px;" disabled={{formulario_planificacion_familiar.invalid}}
                (click)="readonlyPlanificacionFamiliar = !readonlyPlanificacionFamiliar; actualizarPlanificacionFamiliar();cambiarInformacionPlanificacionFamiliar();">
                {{!readonlyPlanificacionFamiliar ? 'Guardar' : 'Editar'}}
              </button>
            </form>

          </div>
        </mat-expansion-panel>



      </mat-accordion>
    </div>



    <!--Esto se muestra al selecciona ver citas-->
    <div class="container" *ngIf="mostrarHisorias==true">
      <mat-card style="margin-bottom: 30px;">
        <table mat-table [dataSource]="dataSource1" multiTemplateDataRows class="mat-elevation-z8">
          <ng-container matColumnDef="{{column}}" *ngFor="let column of columnsToDisplay">
            <th mat-header-cell *matHeaderCellDef> {{column}} </th>
            <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
          </ng-container>

          <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
          <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
              <div class="example-element-detail"
                [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">

                <div class="example-element-description">
                  Indicaciones: {{element.indicaciones}}
                </div>
                <br>
                <div class="example-element-description">
                  Presion: {{element.presion}}
                </div>
                <br>
                <div class="example-element-description">
                  Pulso: {{element.pulso}}
                </div>
                <div class="example-element-description">
                  Remitido a: {{element.seccion}}
                </div>
                <div class="example-element-description">
                  IMC: {{element.peso / (element.talla * element.talla)}}
                </div>
                <div class="example-element-description">
                  Siguiente cita: {{element.siguiente_cita}}
                </div>
                <div class="example-element-description">
                  Impresion Diagnostica: {{element.impresion}}
                </div>
                <div class="example-element-description">
                  Observaciones: {{element.observaciones}}
                </div>

              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
          <tr mat-row *matRowDef="let element; columns: columnsToDisplay;" class="example-element-row"
            [class.example-expanded-row]="expandedElement === element"
            (click)="expandedElement = expandedElement === element ? null : element">
          </tr>
          <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
        </table>
        <!---Aqui Melvin-->
        <div style=" position: fixed;bottom: 10px;right: 40px;">
          <button mat-raised-button id="boton" class="botonperron" (click)="cerrarHistorias()">Volver</button>
        </div>
      </mat-card>




    </div>

  </div>


</div>

</mat-drawer-content>
</mat-drawer-container>